## ğŸš„ è®¿é—®ç½‘é¡µ

è·³åˆ°ä¸»è¦å†…å®¹å½“å‰æ–‡æ¡£é€‚ç”¨äºï¼šDrissionPage 4.0.4.21DrissionPageç‰¹æ€§ä»‹ç»ä½¿ç”¨æ–‡æ¡£å®ç”¨æ•™ç¨‹å¼€å‘è¿›åº¦è½¯ä»¶ç”Ÿæ€åˆä½œå’¨è¯¢GiteeGitHubæœç´¢ğŸ’¬ å…¥é—¨æŒ‡å—ğŸš… SessionPageğŸš„ æ¦‚è¿°ğŸš„ åˆ›å»ºé¡µé¢å¯¹è±¡ğŸš„ è®¿é—®ç½‘é¡µğŸš„ è·å–é¡µé¢ä¿¡æ¯ğŸš„ æŸ¥æ‰¾å…ƒç´ ğŸš„ è·å–å…ƒç´ ä¿¡æ¯ğŸš„ é¡µé¢è®¾ç½®ğŸš„ å¯åŠ¨é…ç½®ğŸ›³ï¸ ChromiumPageğŸš€ WebPageğŸ” æŸ¥æ‰¾å…ƒç´ â¬‡ï¸ ä¸‹è½½æ–‡ä»¶ğŸ§° è¿›é˜¶ä½¿ç”¨ğŸ›  æ—§ç‰ˆï¼ˆMixPageï¼‰ğŸš… SessionPageğŸš„ è®¿é—®ç½‘é¡µæœ¬é¡µæ€»è§ˆğŸš„ è®¿é—®ç½‘é¡µSessionPageå’ŒWebPageçš„ s æ¨¡å¼åŸºäº requests è¿›è¡Œç½‘ç»œè¿æ¥ï¼Œå› æ­¤å¯ä½¿ç”¨ requests å†…ç½®çš„æ‰€æœ‰è¯·æ±‚æ–¹å¼ï¼ŒåŒ…æ‹¬get()ã€post()ã€head()ã€options()ã€put()
ã€patch()ã€delete()ã€‚ä¸è¿‡æœ¬åº“ç›®å‰åªå¯¹get()å’Œpost()åšäº†å°è£…å’Œä¼˜åŒ–ï¼Œå…¶ä½™æ–¹å¼å¯é€šè¿‡è°ƒç”¨é¡µé¢å¯¹è±¡å†…ç½®çš„Sessionå¯¹è±¡ä½¿ç”¨ã€‚è¿™é‡Œåªå¯¹SessionPage
è¿›è¡Œè¯´æ˜ï¼Œåé¢ç« èŠ‚å†å•ç‹¬ä»‹ç»WebPageã€‚
âœ…ï¸ï¸ get()â€‹
ğŸ“Œ è®¿é—®åœ¨çº¿ç½‘é¡µâ€‹
get()æ–¹æ³•è¯­æ³•ä¸ requests çš„get()æ–¹æ³•ä¸€è‡´ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šå¢åŠ äº†è¿æ¥å¤±è´¥é‡è¯•åŠŸèƒ½ã€‚ä¸ requests ä¸ä¸€æ ·çš„æ˜¯ï¼Œå®ƒä¸è¿”å›Responseå¯¹è±¡ã€‚
å‚æ•°åç§°ç±»å‹é»˜è®¤å€¼è¯´æ˜urlstrå¿…å¡«ç›®æ ‡ urlshow_errmsgboolFalseè¿æ¥å‡ºé”™æ—¶æ˜¯å¦æ˜¾ç¤ºå’ŒæŠ›å‡ºå¼‚å¸¸retryintNoneé‡è¯•æ¬¡æ•°ï¼Œä¸ºNoneæ—¶ä½¿ç”¨é¡µé¢å‚æ•°ï¼Œé»˜è®¤ 3intervalfloatNoneé‡è¯•é—´éš”ï¼ˆç§’ï¼‰ï¼Œä¸ºNoneæ—¶ä½¿ç”¨é¡µé¢å‚æ•°ï¼Œé»˜è®¤ 2timeoutfloatNoneåŠ è½½è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰**kwargs-Noneè¿æ¥æ‰€éœ€å…¶å®ƒå‚æ•°ï¼Œå…·ä½“è§ requests ç”¨æ³•
è¿”å›ç±»å‹è¯´æ˜boolæ˜¯å¦è¿æ¥æˆåŠŸ
**kwargså‚æ•°ä¸ requests ä¸­è¯¥å‚æ•°ä½¿ç”¨æ–¹æ³•ä¸€è‡´ï¼Œä½†æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå¦‚æœè¯¥å‚æ•°ä¸­è®¾ç½®äº†æŸä¸€é¡¹ï¼ˆå¦‚headersï¼‰ï¼Œè¯¥é¡¹ä¸­çš„æ¯ä¸ªé¡¹ä¼šè¦†ç›–ä»é…ç½®ä¸­è¯»å–çš„åŒåé¡¹ï¼Œè€Œä¸ä¼šæ•´ä¸ªè¦†ç›–ã€‚
å°±æ˜¯è¯´ï¼Œå¦‚æœæƒ³ç»§ç»­ä½¿ç”¨é…ç½®ä¸­çš„headersä¿¡æ¯ï¼Œè€Œåªæƒ³ä¿®æ”¹å…¶ä¸­ä¸€é¡¹ï¼Œåªéœ€è¦ä¼ å…¥è¯¥é¡¹çš„å€¼å³å¯ã€‚è¿™æ ·å¯ä»¥ç®€åŒ–ä»£ç é€»è¾‘ã€‚
å®ç”¨åŠŸèƒ½ï¼š

ç¨‹åºä¼šæ ¹æ®è¦è®¿é—®çš„ç½‘å€è‡ªåŠ¨åœ¨headersä¸­åŠ å…¥Hostå’ŒRefereré¡¹
ç¨‹åºä¼šè‡ªåŠ¨ä»è¿”å›å†…å®¹ä¸­ç¡®å®šç¼–ç ï¼Œä¸€èˆ¬æƒ…å†µæ— éœ€æ‰‹åŠ¨è®¾ç½®

æ™®é€šè®¿é—®ç½‘é¡µï¼š
from DrissionPage import SessionPagepage = SessionPage()page.get('http://g1879.gitee.io/drissionpage')
ä½¿ç”¨è¿æ¥å‚æ•°è®¿é—®ç½‘é¡µï¼š
from DrissionPage import SessionPagepage = SessionPage()url = 'https://www.baidu.com'headers = {'referer': 'gitee.com'}cookies = {'name': 'value'}proxies = {'http': '127.0.0.1:1080', 'https': '127.0.0.1:1080'}page.get(url, headers=headers, cookies=cookies, proxies=proxies)

ğŸ“Œ è¯»å–æœ¬åœ°æ–‡ä»¶â€‹
get()çš„urlå‚æ•°å¯æŒ‡å‘æœ¬åœ°æ–‡ä»¶ï¼Œå®ç°æœ¬åœ° html è§£æã€‚
from DrissionPage import SessionPagepage = SessionPage()page.get(r'D:\demo.html')

âœ…ï¸ï¸ post()â€‹
æ­¤æ–¹æ³•æ˜¯ç”¨ post æ–¹å¼è¯·æ±‚é¡µé¢ã€‚ç”¨æ³•ä¸get()ä¸€è‡´ã€‚
å‚æ•°åç§°ç±»å‹é»˜è®¤å€¼è¯´æ˜urlstrå¿…å¡«ç›®æ ‡urlshow_errmsgboolFalseè¿æ¥å‡ºé”™æ—¶æ˜¯å¦æ˜¾ç¤ºå’ŒæŠ›å‡ºå¼‚å¸¸retryintNoneé‡è¯•æ¬¡æ•°ï¼Œä¸ºNoneæ—¶ä½¿ç”¨é¡µé¢å‚æ•°ï¼Œé»˜è®¤ 3intervalfloatNoneé‡è¯•é—´éš”ï¼ˆç§’ï¼‰ï¼Œä¸ºNoneæ—¶ä½¿ç”¨é¡µé¢å‚æ•°ï¼Œé»˜è®¤ 2**kwargs-Noneè¿æ¥æ‰€éœ€å…¶å®ƒå‚æ•°ï¼Œå…·ä½“è§ requests ç”¨æ³•
è¿”å›ç±»å‹è¯´æ˜boolæ˜¯å¦è¿æ¥æˆåŠŸ
from DrissionPage import SessionPagepage = SessionPage()data = {'username': 'xxxxx', 'pwd': 'xxxxx'}page.post('http://example.com', data=data)# æˆ–page.post('http://example.com', json=data)
dataå‚æ•°å’Œjsonå‚æ•°éƒ½å¯æ¥æ”¶strå’Œdictæ ¼å¼æ•°æ®ï¼Œå³æœ‰ä»¥ä¸‹ 4 ç§ä¼ é€’æ•°æ®çš„æ–¹å¼ï¼š
# å‘ data å‚æ•°ä¼ å…¥å­—ç¬¦ä¸²page.post(url, data='abc=123')# å‘ data å‚æ•°ä¼ å…¥å­—å…¸page.post(url, data={'abc': '123'})# å‘ json å‚æ•°ä¼ å…¥å­—ç¬¦ä¸²page.post(url, json='abc=123')# å‘ json å‚æ•°ä¼ å…¥å­—å…¸page.post(url, json={'abc': '123'})
å…·ä½“ä½¿ç”¨å“ªç§ï¼ŒæŒ‰æœåŠ¡å™¨è¦æ±‚è€Œå®šã€‚

âœ…ï¸ï¸ å…¶å®ƒè¯·æ±‚æ–¹å¼â€‹
æœ¬åº“åªé’ˆå¯¹å¸¸ç”¨çš„ get å’Œ post æ–¹å¼ä½œäº†ä¼˜åŒ–ï¼Œä½†ä¹Ÿå¯ä»¥é€šè¿‡æå–é¡µé¢å¯¹è±¡å†…çš„Sessionå¯¹è±¡ä»¥åŸç”Ÿ requests ä»£ç æ–¹å¼æ‰§è¡Œå…¶å®ƒè¯·æ±‚æ–¹å¼ã€‚
from DrissionPage import SessionPagepage = SessionPage()# è·å–å†…ç½®çš„ Session å¯¹è±¡session = page.session# ä»¥ head æ–¹å¼å‘é€è¯·æ±‚response = session.head('https://www.baidu.com')print(response.headers)
è¾“å‡ºï¼š
{'Accept-Ranges': 'bytes', 'Cache-Control': 'private, no-cache, no-store, proxy-revalidate, no-transform', 'Connection': 'keep-alive', 'Content-Length': '277', 'Content-Type': 'text/html', 'Date': 'Tue, 04 Jan 2022 06:49:18 GMT', 'Etag': '"575e1f72-115"', 'Last-Modified': 'Mon, 13 Jun 2016 02:50:26 GMT', 'Pragma': 'no-cache', 'Server': 'bfe/1.0.8.18'}ä¸Šä¸€é¡µğŸš„ åˆ›å»ºé¡µé¢å¯¹è±¡ä¸‹ä¸€é¡µğŸš„ è·å–é¡µé¢ä¿¡æ¯âœ…ï¸ï¸ get()ğŸ“Œ è®¿é—®åœ¨çº¿ç½‘é¡µğŸ“Œ è¯»å–æœ¬åœ°æ–‡ä»¶âœ…ï¸ï¸ post()âœ…ï¸ï¸ å…¶å®ƒè¯·æ±‚æ–¹å¼ä½œè€…g1879äº¤æµè”ç³»é‚®ç®±ï¼šg1879@qq.comQQç¾¤ï¼š636361957æ—§ç‰ˆåœ°å€3.2ç‰ˆæ–‡æ¡£MixPageæœ¬æ–‡æ¡£ç¦æ­¢å•†ç”¨ DrissionPageDocs by g1879 is licensed under CC BY-NC 4.0
ç²¤ICPå¤‡2024179482å·-1.
